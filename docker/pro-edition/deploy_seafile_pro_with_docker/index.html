
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="seafile">
      
      
        <link rel="canonical" href="https://haiwen.github.io/seafile-admin-docs/docker/pro-edition/deploy_seafile_pro_with_docker/">
      
      
        <link rel="prev" href="../../deploy_seafile_with_docker/">
      
      
        <link rel="next" href="../../cluster/deploy_seafile_cluster_with_docker/">
      
      
      <link rel="icon" href="../../../media/favicon.ico">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.4">
    
    
      
        <title>Seafile Professional Installation - Seafile Admin Manual</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.bd3936ea.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.356b1318.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#installation-of-seafile-server-professional-edition-with-docker" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Seafile Admin Manual" class="md-header__button md-logo" aria-label="Seafile Admin Manual" data-md-component="logo">
      
  <img src="../../../media/seafile-transparent-1024.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Seafile Admin Manual
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Seafile Professional Installation
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/haiwen/seafile-admin-docs/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    haiwen/seafile-admin-docs
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Seafile Admin Manual" class="md-nav__button md-logo" aria-label="Seafile Admin Manual" data-md-component="logo">
      
  <img src="../../../media/seafile-transparent-1024.png" alt="logo">

    </a>
    Seafile Admin Manual
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/haiwen/seafile-admin-docs/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    haiwen/seafile-admin-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Overview
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Overview
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../overview/components/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Seafile Components
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../overview/file_permission_management/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    File permission management
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../roadmap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Roadmap
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../contribution/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contribution
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../changelog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Changelog
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Seafile Community Setup on Linux
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Seafile Community Setup on Linux
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Outline
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy/using_sqlite/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation with SQLite
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy/using_mysql/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation with MySQL
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy/https_with_nginx/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HTTPS with Nginx
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy/https_with_apache/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HTTPS with Apache
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy/add_memcached/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Add Memcached
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../faq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Common Problems for Setting up Server
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Seafile Professional Setup on Linux
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Seafile Professional Setup on Linux
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy_pro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Outline
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy_pro/download_and_setup_seafile_professional_server/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy_pro/memcached_options/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Memcached Options for Pro Edition
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy_pro/migrate_from_seafile_community_server/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Migration from Seafile Community
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" >
        
          
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Storage Backends
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            Storage Backends
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy_pro/setup_with_amazon_s3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Amazon S3 Backend
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy_pro/setup_with_ceph/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ceph Backend
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy_pro/setup_with_swift/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OpenStack Swift Backend
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy_pro/setup_with_oss/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Alibaba OSS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy_pro/multiple_storage_backends/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Multiple Storage Backends
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy_pro/migrate/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data migration
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6" >
        
          
          <label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Cluster Deployment
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            Cluster Deployment
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy_pro/deploy_in_a_cluster/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deploy in a cluster
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy_pro/enable_search_and_background_tasks_in_a_cluster/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Search and background tasks in a cluster
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy_pro/memcached_mariadb_cluster/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Memcache and MariaDB Cluster
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy_pro/notification-server/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Notification Server in Cluster
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy_pro/setup_seafile_cluster_with_nfs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Setup Seafile cluster with NFS
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy_pro/seafile_professional_sdition_software_license_agreement/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    License
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Seafile Setup with Docker
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Seafile Setup with Docker
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy_seafile_with_docker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Seafile Community Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Seafile Professional Installation
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Seafile Professional Installation
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#requirements" class="md-nav__link">
    Requirements
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setup" class="md-nav__link">
    Setup
  </a>
  
    <nav class="md-nav" aria-label="Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installing-docker" class="md-nav__link">
    Installing Docker
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installing-docker-compose" class="md-nav__link">
    Installing Docker Compose
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#downloading-the-seafile-image" class="md-nav__link">
    Downloading the Seafile Image
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#downloading-and-modifying-docker-composeyml" class="md-nav__link">
    Downloading and Modifying docker-compose.yml
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#starting-the-docker-containers" class="md-nav__link">
    Starting the Docker Containers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#activating-the-seafile-license" class="md-nav__link">
    Activating the Seafile License
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reviewing-the-deployment" class="md-nav__link">
    Reviewing the Deployment
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-a-custom-ssl-certificate" class="md-nav__link">
    Configuring a Custom SSL Certificate
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#seafile-directory-structure" class="md-nav__link">
    Seafile directory structure
  </a>
  
    <nav class="md-nav" aria-label="Seafile directory structure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#shared" class="md-nav__link">
    /shared
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#backup-and-recovery" class="md-nav__link">
    Backup and Recovery
  </a>
  
    <nav class="md-nav" aria-label="Backup and Recovery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#structure" class="md-nav__link">
    Structure
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backup" class="md-nav__link">
    Backup
  </a>
  
    <nav class="md-nav" aria-label="Backup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#backing-up-database" class="md-nav__link">
    Backing up Database:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backing-up-seafile-library-data" class="md-nav__link">
    Backing up Seafile Library Data
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recovery" class="md-nav__link">
    Recovery
  </a>
  
    <nav class="md-nav" aria-label="Recovery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#restoring-the-databases" class="md-nav__link">
    Restoring the Databases
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#restoring-the-seafile-library-data" class="md-nav__link">
    Restoring the Seafile Library data
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#garbage-collection" class="md-nav__link">
    Garbage Collection
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#run-seafile-as-non-root-user-inside-docker" class="md-nav__link">
    Run Seafile as non root user inside docker
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onlyoffice-with-docker" class="md-nav__link">
    OnlyOffice with Docker
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#clamav-with-docker" class="md-nav__link">
    Clamav with Docker
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#other-functions" class="md-nav__link">
    Other functions
  </a>
  
    <nav class="md-nav" aria-label="Other functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ldapad-integration-for-pro" class="md-nav__link">
    LDAP/AD Integration for Pro
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#s3openswiftceph-storage-backends" class="md-nav__link">
    S3/OpenSwift/Ceph Storage Backends
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#online-file-preview-and-editing" class="md-nav__link">
    Online File Preview and Editing
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advanced-user-management" class="md-nav__link">
    Advanced User Management
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advanced-authentication" class="md-nav__link">
    Advanced Authentication
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#admin-tools" class="md-nav__link">
    Admin Tools
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#faq" class="md-nav__link">
    FAQ
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../cluster/deploy_seafile_cluster_with_docker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Seafile Docker Cluster Deployment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../migrate_ce_to_pro_with_docker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Migration from Seafile Community
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../non_docker_to_docker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Migrate from non-docker deployment
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Advanced Setup Options
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Advanced Setup Options
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1" >
        
          
          <label class="md-nav__link" for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    LDAP/AD Integration
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1">
            <span class="md-nav__icon md-icon"></span>
            LDAP/AD Integration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy/using_ldap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LDAP Integration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy_pro/using_ldap_pro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LDAP Configuration for Seafile Pro
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy_pro/ldap_group_sync/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Importing Groups from LDAP (Pro)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy_pro/ldap_role_sync/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Importing Roles from LDAP (Pro)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy/ldap_in_11.0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LDAP in version 11.0
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy_pro/ldap_in_11.0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LDAP in version 11.0 (Pro)
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Single Sign On
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            Single Sign On
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy/single_sign_on/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Outline
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy/shibboleth_config_v6.3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Shibboleth Authentication
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy/oauth/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OAuth Authentication
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy/remote_user/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Remote User Authentication
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy/auto_login_seadrive/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Auto Login to SeaDrive on Windows
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy_pro/adfs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ADFS or SAML 2.0 (Pro)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy_pro/saml2_in_10.0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SAML 2.0 in version 10.0 (Pro)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy_pro/cas/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CAS Authentication (Pro)
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3" >
        
          
          <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Online Office
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            Online Office
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy/libreoffice_online/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LibreOffice Online Integration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy/only_office/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OnlyOffice Integration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy_pro/office_web_app/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Office Online Server Integration (Pro)
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../extra_setup/setup_seadoc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SeaDoc Integration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy/notification-server/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Notification Server
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_6" >
        
          
          <label class="md-nav__link" for="__nav_5_6" id="__nav_5_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    WebDAV and FUSE extensions
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_6">
            <span class="md-nav__icon md-icon"></span>
            WebDAV and FUSE extensions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../extension/webdav/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    WebDAV extension
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../extension/fuse/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FUSE extension
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_7" >
        
          
          <label class="md-nav__link" for="__nav_5_7" id="__nav_5_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Virus Scan (Pro)
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_7">
            <span class="md-nav__icon md-icon"></span>
            Virus Scan (Pro)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy_pro/virus_scan/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Outline
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy_pro/deploy_clamav_as_daemon/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Run ClamAV as a Daemon
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy_pro/virus_scan_with_kav4fs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Virus Scan With Kav4fs
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_8" >
        
          
          <label class="md-nav__link" for="__nav_5_8" id="__nav_5_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Advanced User Management (Pro)
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_8">
            <span class="md-nav__icon md-icon"></span>
            Advanced User Management (Pro)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy_pro/multi_institutions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Multi-Institutions Support
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy_pro/roles_permissions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Roles and Permissions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy_pro/admin_roles_permissions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Administrator Roles and Permissions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy_pro/multi_tenancy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Multi-Tenancy Support
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy_pro/details_about_file_search/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Advanced File Search configuration (Pro)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy/migrate_from_sqlite_to_mysql/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Migrate From SQLite to MySQL
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_11" >
        
          
          <label class="md-nav__link" for="__nav_5_11" id="__nav_5_11_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Others Deployment Notes
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_11">
            <span class="md-nav__icon md-icon"></span>
            Others Deployment Notes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy/ocm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Open Cloud Mesh
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy/using_firewall/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Firewall settings
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy/deploy_seafile_behind_nat/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deploy Seafile behind NAT
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy/deploy_seahub_at_non-root_domain/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deploy Seahub at Non-root domain
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy/start_seafile_at_system_bootup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Start Seafile at System Bootup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy/using_logrotate/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Logrotate
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../security/fail2ban/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Config fail2ban
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy_pro/real_time_backup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Real-time Backup Server
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Configuration and Customization
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Configuration and Customization
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Outline
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../config/ccnet-conf/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ccnet.conf
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../config/seafile-conf/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    seafile.conf
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../config/seahub_settings_py/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    seahub_settings.py
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../config/seafevents-conf/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    seafevents.conf
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../config/seahub_customization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Seahub customization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../config/sending_email/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Email Sending
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Administration
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Administration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../maintain/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Outline
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../maintain/account/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Account management
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../maintain/two_factor_authentication/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Two-factor Authentication
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../security/security_features/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Security features
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../security/auditing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Access logs and auditing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../maintain/export_report/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Export report
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../maintain/logs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Logs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../maintain/backup_recovery/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Backup and Recovery
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../maintain/seafile_fsck/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Seafile FSCK
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../maintain/seafile_gc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Seafile GC
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../maintain/clean_database/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Clean database
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../deploy_pro/seaf_import/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Import Directory To Seafile (Pro)
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Upgrade Seafile Server
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Upgrade Seafile Server
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../upgrade/upgrade/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Outline
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../upgrade/upgrade_docker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Upgrade Seafile Docker
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../upgrade/upgrade_a_cluster/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Upgrade Seafile Cluster
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../upgrade/upgrade_a_cluster_docker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Upgrade Seafile Cluster (Docker)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../upgrade/upgrade_notes_for_7.0.x/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Upgrade notes for 7.0.x
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../upgrade/upgrade_notes_for_7.1.x/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Upgrade notes for 7.1.x
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../upgrade/upgrade_notes_for_8.0.x/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Upgrade notes for 8.0.x
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../upgrade/upgrade_notes_for_9.0.x/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Upgrade notes for 9.0.x
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../upgrade/upgrade_notes_for_10.0.x/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Upgrade notes for 10.0.x
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../upgrade/upgrade_notes_for_11.0.x/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Upgrade notes for 11.0.x
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Developing
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            Developing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../develop/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Outline
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_2" >
        
          
          <label class="md-nav__link" for="__nav_9_2" id="__nav_9_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    How to Build Seafile
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_2">
            <span class="md-nav__icon md-icon"></span>
            How to Build Seafile
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../build_seafile/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Outline
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../build_seafile/linux/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Linux
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../build_seafile/osx/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mac OS X
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../build_seafile/windows/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Windows
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../build_seafile/server/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Server
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../build_seafile/rpi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Raspberry Pi
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../develop/translation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Translation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../develop/web_api_v2.1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Web API V2.1
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../develop/python_api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/rene-s/Seafile-PHP-SDK" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PHP API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../develop/data_model/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data Model
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../develop/server-components/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Server Components
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    ChangeLog
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            ChangeLog
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../changelog/server-changelog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Seafile Community Edition
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../changelog/changelog-for-seafile-professional-server/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Seafile Professional Edition
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../changelog/client-changelog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Seafile Client
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../changelog/drive-client-changelog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Drive Client
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#requirements" class="md-nav__link">
    Requirements
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setup" class="md-nav__link">
    Setup
  </a>
  
    <nav class="md-nav" aria-label="Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installing-docker" class="md-nav__link">
    Installing Docker
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installing-docker-compose" class="md-nav__link">
    Installing Docker Compose
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#downloading-the-seafile-image" class="md-nav__link">
    Downloading the Seafile Image
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#downloading-and-modifying-docker-composeyml" class="md-nav__link">
    Downloading and Modifying docker-compose.yml
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#starting-the-docker-containers" class="md-nav__link">
    Starting the Docker Containers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#activating-the-seafile-license" class="md-nav__link">
    Activating the Seafile License
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reviewing-the-deployment" class="md-nav__link">
    Reviewing the Deployment
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-a-custom-ssl-certificate" class="md-nav__link">
    Configuring a Custom SSL Certificate
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#seafile-directory-structure" class="md-nav__link">
    Seafile directory structure
  </a>
  
    <nav class="md-nav" aria-label="Seafile directory structure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#shared" class="md-nav__link">
    /shared
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#backup-and-recovery" class="md-nav__link">
    Backup and Recovery
  </a>
  
    <nav class="md-nav" aria-label="Backup and Recovery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#structure" class="md-nav__link">
    Structure
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backup" class="md-nav__link">
    Backup
  </a>
  
    <nav class="md-nav" aria-label="Backup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#backing-up-database" class="md-nav__link">
    Backing up Database:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backing-up-seafile-library-data" class="md-nav__link">
    Backing up Seafile Library Data
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recovery" class="md-nav__link">
    Recovery
  </a>
  
    <nav class="md-nav" aria-label="Recovery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#restoring-the-databases" class="md-nav__link">
    Restoring the Databases
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#restoring-the-seafile-library-data" class="md-nav__link">
    Restoring the Seafile Library data
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#garbage-collection" class="md-nav__link">
    Garbage Collection
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#run-seafile-as-non-root-user-inside-docker" class="md-nav__link">
    Run Seafile as non root user inside docker
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#onlyoffice-with-docker" class="md-nav__link">
    OnlyOffice with Docker
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#clamav-with-docker" class="md-nav__link">
    Clamav with Docker
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#other-functions" class="md-nav__link">
    Other functions
  </a>
  
    <nav class="md-nav" aria-label="Other functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ldapad-integration-for-pro" class="md-nav__link">
    LDAP/AD Integration for Pro
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#s3openswiftceph-storage-backends" class="md-nav__link">
    S3/OpenSwift/Ceph Storage Backends
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#online-file-preview-and-editing" class="md-nav__link">
    Online File Preview and Editing
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advanced-user-management" class="md-nav__link">
    Advanced User Management
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advanced-authentication" class="md-nav__link">
    Advanced Authentication
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#admin-tools" class="md-nav__link">
    Admin Tools
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#faq" class="md-nav__link">
    FAQ
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="installation-of-seafile-server-professional-edition-with-docker">Installation of Seafile Server Professional Edition with Docker<a class="headerlink" href="#installation-of-seafile-server-professional-edition-with-docker" title="Permanent link">&para;</a></h1>
<p>This manual explains how to deploy and run Seafile Server Professional Edition (Seafile PE) on a Linux server using Docker and Docker Compose. The deployment has been tested for Debian/Ubuntu and CentOS, but Seafile PE should also work on other Linux distributions.</p>
<h2 id="requirements">Requirements<a class="headerlink" href="#requirements" title="Permanent link">&para;</a></h2>
<p>Seafile PE requires a minimum of 2 cores and 2GB RAM. If Elasticsearch is installed on the same server, the minimum requirements are 4 cores and 4 GB RAM.</p>
<p>Seafile PE can be used without a paid license with up to three users. Licenses for more user can be purchased in the <a href="https://customer.seafile.com">Seafile Customer Center</a> or contact Seafile Sales at sales@seafile.com or one of <a href="https://www.seafile.com/en/partner/">our partners</a>.</p>
<h2 id="setup">Setup<a class="headerlink" href="#setup" title="Permanent link">&para;</a></h2>
<h3 id="installing-docker">Installing Docker<a class="headerlink" href="#installing-docker" title="Permanent link">&para;</a></h3>
<p>Use the <a href="https://docs.docker.com/engine/install/">official installation guide for your OS to install Docker</a>.</p>
<h3 id="installing-docker-compose">Installing Docker Compose<a class="headerlink" href="#installing-docker-compose" title="Permanent link">&para;</a></h3>
<p>Install the Docker Compose package:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># CentOS</span>
yum<span class="w"> </span>install<span class="w"> </span>docker-compose<span class="w"> </span>-y

<span class="c1"># Debian/Ubuntu</span>
apt-get<span class="w"> </span>install<span class="w"> </span>docker-compose<span class="w"> </span>-y
</code></pre></div>

<h3 id="downloading-the-seafile-image">Downloading the Seafile Image<a class="headerlink" href="#downloading-the-seafile-image" title="Permanent link">&para;</a></h3>
<p>Log into Seafile's private repository and pull the Seafile image:</p>
<div class="codehilite"><pre><span></span><code>docker login docker.seadrive.org
docker pull docker.seadrive.org/seafileltd/seafile-pro-mc:latest
</code></pre></div>

<p>When prompted, enter the username and password of the private repository. They are available on the download page in the <a href="https://customer.seafile.com/downloads">Customer Center</a>.</p>
<p>NOTE: Older Seafile PE versions are also available in the repository (back to Seafile 7.0). To pull an older version, replace 'latest' tag by the desired version.</p>
<h3 id="downloading-and-modifying-docker-composeyml">Downloading and Modifying docker-compose.yml<a class="headerlink" href="#downloading-and-modifying-docker-composeyml" title="Permanent link">&para;</a></h3>
<p>Download the docker-compose.yml sample file into Seafile's directory and modify the Compose file to fit your environment and settings.</p>
<p>NOTE: Different versions of Seafile have different compose files.</p>
<div class="codehilite"><pre><span></span><code>mkdir /opt/seafile
cd /opt/seafile

<span class="gh">#</span> Seafile PE 7.1 and 8.0
wget -O &quot;docker-compose.yml&quot; &quot;https://manual.seafile.com/docker/pro-edition/7.1_8.0/docker-compose.yml&quot;

<span class="gh">#</span> Seafile PE 9.0
wget -O &quot;docker-compose.yml&quot; &quot;https://manual.seafile.com/docker/pro-edition/9.0/docker-compose.yml&quot;

<span class="gh">#</span> Seafile PE 10.0
wget -O &quot;docker-compose.yml&quot; &quot;https://manual.seafile.com/docker/pro-edition/10.0/docker-compose.yml&quot;

nano docker-compose.yml
</code></pre></div>

<p>The following fields merit particular attention:</p>
<ul>
<li>The password of MariaDB root (MYSQL_ROOT_PASSWORD and DB_ROOT_PASSWD)</li>
<li>The Seafile admin email address (SEAFILE_ADMIN_EMAIL)</li>
<li>The Seafile admin password (SEAFILE_ADMIN_PASSWORD)</li>
<li>The listening ports of the container seafile </li>
<li>The host name (SEAFILE_SERVER_HOSTNAME)</li>
<li>The use of Let's Encrypt for HTTPS (SEAFILE_SERVER_LETSENCRYPT)</li>
</ul>
<p>The new password for MYSQL_ROOT_PASSWORD and DB_ROOT_PASSWD must be identical.</p>
<p>To enable HTTPS access - which is required for production use - , enter the SEAFILE_SERVER_HOSTNAME and uncomment port 443 in the configuration of the container seafile. If you want to use Let's Encrypt to obtain a SSL certificate, set SEAFILE_SERVER_LETSENCRYPT to <code>true</code> (and do not comment out port 80 because it is required when requesting a Let's Encrypt certificate). If you want to use your own SSL certificate, leave SEAFILE_SERVER_LETSENCRYPT set to <code>false</code> and follow the instructions in section <a href="https://manual.seafile.com/docker/pro-edition/deploy_seafile_pro_with_docker/#configuring-a-custom-ssl-certificate">Configuring a Custom SSL Certificate</a>.</p>
<p>Additional customizable options in the Compose file are:</p>
<ul>
<li>The volume path for the container db</li>
<li>The volume path for the container elasticsearch</li>
<li>The volume path for the container seafile</li>
<li>The image tag of the Seafile version to install (image)</li>
<li>The time zone (TIME_ZONE)</li>
</ul>
<p>If you have pulled a particular version, modify the image tag accordingly.</p>
<p>To conclude, set the directory permissions of the Elasticsearch volumne:</p>
<div class="codehilite"><pre><span></span><code>mkdir<span class="w"> </span>-p<span class="w"> </span>/opt/seafile-elasticsearch/data
chmod<span class="w"> </span><span class="m">777</span><span class="w"> </span>-R<span class="w"> </span>/opt/seafile-elasticsearch/data
</code></pre></div>

<h3 id="starting-the-docker-containers">Starting the Docker Containers<a class="headerlink" href="#starting-the-docker-containers" title="Permanent link">&para;</a></h3>
<p>Run docker-compose in detached mode:</p>
<div class="codehilite"><pre><span></span><code>docker-compose<span class="w"> </span>up<span class="w"> </span>-d
</code></pre></div>

<p>NOTE: You must run the above command in the directory with the docker-compose.yml.</p>
<p>Wait a few moment for the database to initialize. You can now access Seafile at the host name specified in the Compose file. (A 502 Bad Gateway error means that the system has not yet completed the initialization.)</p>
<h3 id="activating-the-seafile-license">Activating the Seafile License<a class="headerlink" href="#activating-the-seafile-license" title="Permanent link">&para;</a></h3>
<p>If you have a <code>seafile-license.txt</code> license file, simply put it in the volume of the Seafile container. The volumne's default path in the Compose file is <code>/opt/seafile-data</code>. If you have modified the path, save the license file under your custom path.</p>
<p>Then restart the container:</p>
<div class="codehilite"><pre><span></span><code>docker-compose restart
</code></pre></div>

<h3 id="reviewing-the-deployment">Reviewing the Deployment<a class="headerlink" href="#reviewing-the-deployment" title="Permanent link">&para;</a></h3>
<p>The command <code>docker container list</code> should list the four containers specified in the docker-compose.yml.</p>
<p>The directory layout of the Seafile container's volume should look as follows:</p>
<div class="codehilite"><pre><span></span><code>$<span class="w"> </span>tree<span class="w"> </span>/opt/seafile-data<span class="w"> </span>-L<span class="w"> </span><span class="m">2</span>
/opt/seafile-data
├──<span class="w"> </span>logs
│<span class="w">   </span>└──<span class="w"> </span>var-log
├──<span class="w"> </span>nginx
│<span class="w">   </span>└──<span class="w"> </span>conf
├──<span class="w"> </span>seafile
│<span class="w">   </span>├──<span class="w"> </span>ccnet
│<span class="w">   </span>├──<span class="w"> </span>conf
│<span class="w">   </span>├──<span class="w"> </span>logs
│<span class="w">   </span>├──<span class="w"> </span>pro-data
│<span class="w">   </span>├──<span class="w"> </span>seafile-data
│<span class="w">   </span>└──<span class="w"> </span>seahub-data
└──<span class="w"> </span>ssl
<span class="w">    </span>├──<span class="w"> </span>account.conf
<span class="w">    </span>├──<span class="w"> </span>ca
<span class="w">    </span>├──<span class="w"> </span>http.header
<span class="w">    </span>├──<span class="w"> </span>SEAFILE_SERVER_HOSTNAME
<span class="w">    </span>├──<span class="w"> </span>SEAFILE_SERVER_HOSTNAME.crt
<span class="w">    </span>└──<span class="w"> </span>SEAFILE_SERVER_HOSTNAME.key
</code></pre></div>

<p>NOTE: The directory <code>ssl</code> does not exist if Let's Encrypt is not used for HTTPS. SEAFILE_SERVER_HOSTNAME substitutes for the host name used in the docker-compose.yml file.</p>
<p>All Seafile config files are stored in <code>/opt/seafile-data/seafile/conf</code>. The nginx config file is in <code>/opt/seafile-data/nginx/conf</code>.</p>
<p>Any modification of a configuration file requires a restart of Seafile to take effect:</p>
<div class="codehilite"><pre><span></span><code>docker-compose restart
</code></pre></div>

<p>All Seafile log files are stored in <code>/opt/seafile-data/seafile/logs</code> whereas all other log files are in <code>/opt/seafile-data/logs/var-log</code>.</p>
<h2 id="configuring-a-custom-ssl-certificate">Configuring a Custom SSL Certificate<a class="headerlink" href="#configuring-a-custom-ssl-certificate" title="Permanent link">&para;</a></h2>
<p>NOTE: This section is only relevant when you do not want to use a Let's Encrypt certificate, but a certificate of your own.</p>
<p>Create a folder for the certificate:</p>
<div class="codehilite"><pre><span></span><code>mkdir /opt/seafile-data/ssl
</code></pre></div>

<p>Save your certificate and private key in this folder.</p>
<p>Modify the nginx configuration <code>seafile.nginx.conf</code> in <code>/opt/seafile-data/nginx/conf</code> to look like this:</p>
<div class="codehilite"><pre><span></span><code><span class="nt">server</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="err">listen</span><span class="w"> </span><span class="err">80</span><span class="p">;</span>
<span class="w">    </span><span class="err">server_name</span><span class="w"> </span><span class="err">example.seafile.com</span><span class="w"> </span><span class="err">default_server</span><span class="p">;</span>

<span class="w">    </span><span class="err">location</span><span class="w"> </span><span class="err">/</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="err">rewrite</span><span class="w"> </span><span class="err">^</span><span class="w"> </span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="err">$</span><span class="n">host</span><span class="err">$</span><span class="n">request_uri</span><span class="o">?</span><span class="w"> </span><span class="n">permanent</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="err">}</span>
<span class="nt">server</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="err">listen</span><span class="w"> </span><span class="err">443</span><span class="p">;</span>
<span class="w">    </span><span class="err">ssl</span><span class="w"> </span><span class="err">on</span><span class="p">;</span>
<span class="w">    </span><span class="err">ssl_certificate</span><span class="w">      </span><span class="err">/shared/ssl/your-ssl-crt.crt</span><span class="p">;</span>
<span class="w">    </span><span class="err">ssl_certificate_key</span><span class="w">  </span><span class="err">/shared/ssl/your-ssl-key.key</span><span class="p">;</span>
<span class="w">    </span><span class="err">ssl_ciphers</span><span class="w"> </span><span class="err">ECDH+</span><span class="n">AESGCM</span><span class="p">:</span><span class="n">DH</span><span class="o">+</span><span class="n">AESGCM</span><span class="o">:</span><span class="n">ECDH</span><span class="o">+</span><span class="n">AES256</span><span class="o">:</span><span class="n">DH</span><span class="o">+</span><span class="n">AES256</span><span class="o">:</span><span class="n">ECDH</span><span class="o">+</span><span class="n">AES128</span><span class="o">:</span><span class="n">DH</span><span class="o">+</span><span class="n">AES</span><span class="o">:</span><span class="n">ECDH</span><span class="mi">+3</span><span class="n">DES</span><span class="o">:</span><span class="n">DH</span><span class="mi">+3</span><span class="n">DES</span><span class="o">:</span><span class="n">RSA</span><span class="o">+</span><span class="n">AESGCM</span><span class="o">:</span><span class="n">RSA</span><span class="o">+</span><span class="n">AES</span><span class="o">:</span><span class="n">RSA</span><span class="mi">+3</span><span class="n">DES</span><span class="o">:!</span><span class="n">aNULL</span><span class="o">:!</span><span class="n">MD5</span><span class="o">:!</span><span class="n">DSS</span><span class="p">;</span>

<span class="w">    </span><span class="err">server_name</span><span class="w"> </span><span class="err">example.seafile.com</span><span class="p">;</span>
<span class="w">    </span><span class="err">...</span>
</code></pre></div>

<p>Modify the values for server_name, ssl_certificate, and ssl_certificate_key to correspond to your situation.</p>
<p>Now reload the nginx configuration:</p>
<div class="codehilite"><pre><span></span><code><span class="n">docker</span><span class="w"> </span><span class="n">exec</span><span class="w"> </span><span class="o">-</span><span class="n">it</span><span class="w"> </span><span class="n">seafile</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">nginx</span><span class="w"> </span><span class="o">-</span><span class="n">s</span><span class="w"> </span><span class="n">reload</span>
</code></pre></div>

<p>NOTE: If you got the following error when SEAFILE_SERVER_LETSENCRYPT=true is set:</p>
<div class="codehilite"><pre><span></span><code><span class="nv">subprocess</span>.<span class="nv">CalledProcessError</span>:<span class="w"> </span><span class="nv">Command</span><span class="w"> </span><span class="s1">&#39;/scripts/ssl.sh /shared/ssl cloud.seafile-demo.de&#39;</span><span class="w"> </span><span class="nv">returned</span><span class="w"> </span><span class="nv">non</span><span class="o">-</span><span class="nv">zero</span><span class="w"> </span><span class="k">exit</span><span class="w"> </span><span class="nv">status</span><span class="w"> </span><span class="mi">128</span>.
</code></pre></div>

<p>In /scripts/ssl.sh (script in seafile container), <code>git clone git://</code> has to be replaced with <code>git clone https://</code>.</p>
<p>Then restart the container:</p>
<div class="codehilite"><pre><span></span><code>docker-compose<span class="w"> </span>restart
</code></pre></div>

<p>Since version 9.0.6, we use acme (not acme-tiny) to get certificate and fix this error.</p>
<p>Since version 10.0.x, if you want to use a reverse proxy and apply for a certificate outside docker, you can use <code>FORCE_HTTPS_IN_CONF</code> to force write <code>https://&lt;your_host&gt;</code> in the configuration file.</p>
<p>e.g.</p>
<div class="codehilite"><pre><span></span><code>seafile:
    ...
    environment:
        ...
        <span class="k">-</span> SEAFILE_SERVER_LETSENCRYPT=false
        <span class="k">-</span> SEAFILE_SERVER_HOSTNAME=seafile.example.com
        <span class="k">-</span> FORCE_HTTPS_IN_CONF=true
        ...
</code></pre></div>

<h2 id="seafile-directory-structure">Seafile directory structure<a class="headerlink" href="#seafile-directory-structure" title="Permanent link">&para;</a></h2>
<h3 id="shared"><code>/shared</code><a class="headerlink" href="#shared" title="Permanent link">&para;</a></h3>
<p>Placeholder spot for shared volumes. You may elect to store certain persistent information outside of a container, in our case we keep various log files and upload directory outside. This allows you to rebuild containers easily without losing important information.</p>
<ul>
<li>/shared/seafile: This is the directory for seafile server configuration 、logs and data.</li>
<li>/shared/seafile/logs: This is the directory that would contain the log files of seafile server processes. For example, you can find seaf-server logs in <code>shared/seafile/logs/seafile.log</code>.</li>
<li>/shared/logs: This is the directory for logs.</li>
<li>/shared/logs/var-log: This is the directory that would be mounted as <code>/var/log</code> inside the container. For example, you can find the nginx logs in <code>shared/logs/var-log/nginx/</code>.</li>
<li>/shared/ssl: This is directory for certificate, which does not exist by default.</li>
<li>/shared/bootstrap.conf: This file does not exist by default. You can create it by your self, and write the configuration of files similar to the <code>samples</code> folder.</li>
</ul>
<h2 id="backup-and-recovery">Backup and Recovery<a class="headerlink" href="#backup-and-recovery" title="Permanent link">&para;</a></h2>
<h3 id="structure">Structure<a class="headerlink" href="#structure" title="Permanent link">&para;</a></h3>
<p>We assume your seafile volumns path is in <code>/opt/seafile-data</code>. And you want to backup to <code>/opt/seafile-backup</code> directory.
You can create a layout similar to the following in /opt/seafile-backup directory:</p>
<div class="codehilite"><pre><span></span><code>/opt/seafile-backup
---- databases/  MySQL contains database backup files
---- data/  Seafile contains backups of the data directory
</code></pre></div>

<p>The data files to be backed up:</p>
<div class="codehilite"><pre><span></span><code>/opt/seafile-data/seafile/conf  # configuration files
/opt/seafile-data/seafile/seafile-data # data of seafile
/opt/seafile-data/seafile/seahub-data # data of seahub
</code></pre></div>

<h3 id="backup">Backup<a class="headerlink" href="#backup" title="Permanent link">&para;</a></h3>
<p>Steps:</p>
<ol>
<li>Backup the databases;</li>
<li>Backup the seafile data directory;</li>
</ol>
<p>Backup Order: Database First or Data Directory First</p>
<h4 id="backing-up-database">Backing up Database:<a class="headerlink" href="#backing-up-database" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="gh">#</span> It&#39;s recommended to backup the database to a separate file each time. Don&#39;t overwrite older database backups for at least a week.
cd /opt/seafile-backup/databases
docker exec -it seafile-mysql mysqldump  -uroot --opt ccnet_db &gt; ccnet_db.sql
docker exec -it seafile-mysql mysqldump  -uroot --opt seafile_db &gt; seafile_db.sql
docker exec -it seafile-mysql mysqldump  -uroot --opt seahub_db &gt; seahub_db.sql
</code></pre></div>

<h4 id="backing-up-seafile-library-data">Backing up Seafile Library Data<a class="headerlink" href="#backing-up-seafile-library-data" title="Permanent link">&para;</a></h4>
<h5 id="copy-the-whole-data-directory-directly">Copy the whole data directory directly<a class="headerlink" href="#copy-the-whole-data-directory-directly" title="Permanent link">&para;</a></h5>
<div class="codehilite"><pre><span></span><code>cp -R /opt/seafile-data/seafile /opt/seafile-backup/data/
cd /opt/seafile-backup/data &amp;&amp; rm -rf ccnet
</code></pre></div>

<h5 id="use-rsync-to-do-incremental-backup">Use rsync to do incremental backup<a class="headerlink" href="#use-rsync-to-do-incremental-backup" title="Permanent link">&para;</a></h5>
<div class="codehilite"><pre><span></span><code>rsync<span class="w"> </span>-az<span class="w"> </span>/opt/seafile-data/seafile<span class="w"> </span>/opt/seafile-backup/data/
<span class="nb">cd</span><span class="w"> </span>/opt/seafile-backup/data<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>rm<span class="w"> </span>-rf<span class="w"> </span>ccnet
</code></pre></div>

<h3 id="recovery">Recovery<a class="headerlink" href="#recovery" title="Permanent link">&para;</a></h3>
<h4 id="restoring-the-databases">Restoring the Databases<a class="headerlink" href="#restoring-the-databases" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>docker cp /opt/seafile-backup/databases/ccnet_db.sql seafile-mysql:/tmp/ccnet_db.sql
docker cp /opt/seafile-backup/databases/seafile_db.sql seafile-mysql:/tmp/seafile_db.sql
docker cp /opt/seafile-backup/databases/seahub_db.sql seafile-mysql:/tmp/seahub_db.sql

docker exec -it seafile-mysql /bin/sh -c &quot;mysql -uroot ccnet_db &lt; /tmp/ccnet_db.sql&quot;
docker exec -it seafile-mysql /bin/sh -c &quot;mysql -uroot seafile_db &lt; /tmp/seafile_db.sql&quot;
docker exec -it seafile-mysql /bin/sh -c &quot;mysql -uroot seahub_db &lt; /tmp/seahub_db.sql&quot;
</code></pre></div>

<h4 id="restoring-the-seafile-library-data">Restoring the Seafile Library data<a class="headerlink" href="#restoring-the-seafile-library-data" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>cp -R /opt/seafile-backup/data/* /opt/seafile-data/seafile/
</code></pre></div>

<h2 id="garbage-collection">Garbage Collection<a class="headerlink" href="#garbage-collection" title="Permanent link">&para;</a></h2>
<p>When files are deleted, the blocks comprising those files are not immediately removed as there may be other files that reference those blocks (due to the magic of deduplication). To remove them, Seafile requires a <a href="https://manual.seafile.com/maintain/seafile_gc/">'garbage collection'</a> process to be run, which detects which blocks no longer used and purges them. (NOTE: for technical reasons, the GC process does not guarantee that <em>every single</em> orphan block will be deleted.)</p>
<p>The required scripts can be found in the <code>/scripts</code> folder of the docker container. To perform garbage collection, simply run <code>docker exec seafile /scripts/gc.sh</code>. For the community edition, this process will stop the seafile server, but it is a relatively quick process and the seafile server will start automatically once the process has finished. The Professional supports an online garbage collection.</p>
<h2 id="run-seafile-as-non-root-user-inside-docker">Run Seafile as non root user inside docker<a class="headerlink" href="#run-seafile-as-non-root-user-inside-docker" title="Permanent link">&para;</a></h2>
<p>Since version 10.0, you can use run seafile as non root user in docker. (NOTE: Programs such as my_init, Nginx are still run as root inside docker.)</p>
<p>First add the <code>NON_ROOT=true</code> to the docker-compose.yml.</p>
<div class="codehilite"><pre><span></span><code>seafile:
    ...
    environment:
        ...
        <span class="k">-</span> NON_ROOT=true
        ...
</code></pre></div>

<p>Then create a seafile user on the host. (NOTE: Do not change the uid and gid.)</p>
<div class="codehilite"><pre><span></span><code>groupadd --gid 8000 seafile
useradd --home-dir /home/seafile --create-home --uid 8000 --gid 8000 --shell /bin/sh --skel /dev/null seafile
</code></pre></div>

<p>Restarting the container run Seafile use seafile user. (NOTE: Later when do maintenance, other scripts in docker also required to run as seafile user, e.g. <code>su seafile -c ./seaf-gc.sh</code>)</p>
<div class="codehilite"><pre><span></span><code>docker-compose<span class="w"> </span>down
docker-compose<span class="w"> </span>up<span class="w"> </span>-d
</code></pre></div>

<h2 id="onlyoffice-with-docker">OnlyOffice with Docker<a class="headerlink" href="#onlyoffice-with-docker" title="Permanent link">&para;</a></h2>
<p>You need to manually add the OnlyOffice config to docker-compose.yml</p>
<ul>
<li><a href="../deploy_onlyoffice_with_docker/">OnlyOffice with Docker</a></li>
</ul>
<h2 id="clamav-with-docker">Clamav with Docker<a class="headerlink" href="#clamav-with-docker" title="Permanent link">&para;</a></h2>
<p>Since version 9.0.6, you can deploy Clamav with Docker.</p>
<p>You need to manually add the Clamav config to docker-compose.yml</p>
<ul>
<li><a href="../deploy_clamav_with_docker/">Clamav with Docker</a></li>
</ul>
<h2 id="other-functions">Other functions<a class="headerlink" href="#other-functions" title="Permanent link">&para;</a></h2>
<h3 id="ldapad-integration-for-pro">LDAP/AD Integration for Pro<a class="headerlink" href="#ldapad-integration-for-pro" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="../../../deploy_pro/using_ldap_pro/">Configure LDAP in Seafile Pro</a></li>
<li><a href="../../../deploy_pro/ldap_group_sync/">Syncing Groups from LDAP/AD</a></li>
<li><a href="../../../deploy_pro/ldap_role_sync/">Syncing Roles from LDAP/AD</a></li>
</ul>
<h3 id="s3openswiftceph-storage-backends">S3/OpenSwift/Ceph Storage Backends<a class="headerlink" href="#s3openswiftceph-storage-backends" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="../../../deploy_pro/setup_with_amazon_s3/">Setup Seafile Professional Server With Amazon S3</a></li>
<li><a href="../../../deploy_pro/setup_with_swift/">Setup Seafile Professional Server With OpenStack Swift</a></li>
<li><a href="../../../deploy_pro/setup_with_ceph/">Setup Seafile Professional Server With Ceph</a></li>
<li><a href="../../../deploy_pro/migrate_to_ceph/">Migrate from File System to Ceph</a></li>
<li><a href="../../../deploy_pro/migrate/">Data migration between different backends</a></li>
</ul>
<h3 id="online-file-preview-and-editing">Online File Preview and Editing<a class="headerlink" href="#online-file-preview-and-editing" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="../../../deploy_pro/office_documents_preview/">Enable Office/PDF Documents Online Preview</a></li>
<li><a href="../../../deploy_pro/office_web_app/">Integrating with Office Online Server</a></li>
</ul>
<h3 id="advanced-user-management">Advanced User Management<a class="headerlink" href="#advanced-user-management" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="../../../deploy_pro/multi_institutions/">Multi-Institutions Support</a></li>
<li><a href="../../../deploy_pro/roles_permissions/">Roles and Permissions</a></li>
</ul>
<h3 id="advanced-authentication">Advanced Authentication<a class="headerlink" href="#advanced-authentication" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="../../deploy_pro/two_factor_authentication.md">Two-factor Authentication</a></li>
<li><a href="../../../deploy_pro/adfs/">ADFS or SAML 2.0</a></li>
<li><a href="../../../deploy_pro/cas/">CAS</a></li>
</ul>
<h3 id="admin-tools">Admin Tools<a class="headerlink" href="#admin-tools" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="../../../deploy_pro/seaf_import/">Import Directory to Seafile</a></li>
</ul>
<h2 id="faq">FAQ<a class="headerlink" href="#faq" title="Permanent link">&para;</a></h2>
<p>Q: I forgot the SeaTable admin email address/password, how do I create a new admin account?</p>
<p>A: You can create a new admin account by running</p>
<div class="codehilite"><pre><span></span><code><span class="nv">docker</span><span class="w"> </span><span class="k">exec</span><span class="w"> </span><span class="o">-</span><span class="nv">it</span><span class="w"> </span><span class="nv">seafile</span><span class="w"> </span><span class="o">/</span><span class="nv">opt</span><span class="o">/</span><span class="nv">seafile</span><span class="o">/</span><span class="nv">seafile</span><span class="o">-</span><span class="nv">server</span><span class="o">-</span><span class="nv">latest</span><span class="o">/</span><span class="nv">reset</span><span class="o">-</span><span class="nv">admin</span>.<span class="nv">sh</span>
</code></pre></div>

<p>The SeaTable service must be up when running the superuser command.</p>
<p>Q: If, for whatever reason, the installation fails, how do I to start from a clean slate again?</p>
<p>A: Remove the directories /opt/seafile, /opt/seafile-data, /opt/seafile-elasticsearch, and /opt/seafile-mysql and start again.</p>
<p>Q: Something goes wrong during the start of the containers. How can I find out more?</p>
<p>A: You can view the docker logs using this command: <code>docker-compose logs -f</code>.</p>
<p>Q: I forgot the admin password. How do I create a new admin account?</p>
<p>A: Make sure the seafile container is running and enter <code>docker exec -it seafile /opt/seafile/seafile-server-latest/reset-admin.sh</code>.</p>
<p>Q: The Let's Encrypt SSL certificate is about to expire, how do I renew it?</p>
<p>A: The SSL certificate should be renewed automatically 30 days prior to its expiration. If the automatic renewal fails, these commands renew the certificate manually:</p>
<div class="codehilite"><pre><span></span><code>docker exec -it seafile /bin/bash
/scripts/ssl.sh /shared/ssl/ SEAFILE_SERVER_HOSTNAME
</code></pre></div>

<p>SEAFILE_SERVER_HOSTNAME is the host name used in the docker-compose.yml.</p>
<p>Q: <strong>SEAFILE_SERVER_LETSENCRYPT=false change to true.</strong></p>
<p>A: If you want to change to https after using http, first backup and move the seafile.nginx.conf.</p>
<div class="codehilite"><pre><span></span><code>mv<span class="w"> </span>/opt/seafile/shared/nginx/conf/seafile.nginx.conf<span class="w"> </span>/opt/seafile/shared/nginx/conf/seafile.nginx.conf.bak
</code></pre></div>

<p>Starting the new container will automatically apply a certificate.</p>
<div class="codehilite"><pre><span></span><code>docker-compose<span class="w"> </span>down
docker-compose<span class="w"> </span>up<span class="w"> </span>-d
</code></pre></div>

<p>You need to manually change http to https in other configuration files, SERVICE_URL and FILE_SERVER_ROOT in the system admin page also need to be modified.</p>
<p>If you have modified the old seafile.nginx.conf, now you can modify the new seafile.nginx.conf as you want. Then execute the following command to make the nginx configuration take effect.</p>
<div class="codehilite"><pre><span></span><code>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>seafile<span class="w"> </span>nginx<span class="w"> </span>-s<span class="w"> </span>reload
</code></pre></div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2023 Seafile Ltd.
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/haiwen/seafile-admin-docs/" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": [], "search": "../../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.94c44541.min.js"></script>
      
    
  </body>
</html>